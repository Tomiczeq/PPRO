{% extends 'navigation.html' %}

{% block title %} {{ dashboard.name }} {% endblock %}

{% block content %}

    <div class="dashboard_navbar">
        <div class="dashboard_profile">
            <span id="back_btn" class="hidden">
                <i class="fas fa-arrow-left"></i>
            </span>
            <span>{{ dashboard.name }}</span>
        </div>
        <div class="dashboard_btns">
            <span class="date_range">
                <span>last</span>
                <input id="query_last" type="text" value="{{ dashboard.timerange }}">
            </span>
            <span class="icon_btn" id="add_row_btn">
                <i class="fas fa-plus"></i>
            </span>
            <span class="icon_btn" id="save_dashboard_btn">
                <i class="fas fa-save"></i>
            </span>
            <span class="icon_btn" id="refresh_dashboard_btn">
                <i class="fas fa-sync"></i>
            </span>
        </div>
    </div>

    <div class="rows_container">
    </div>

    <div class="chartconf_container">

        <div class="chartconf_header"></div>

        <div class="chartconf_chart_container">
            <div class="chartconf_chart">
            </div>
        </div>

        <div class="chartconf_nav">
            <ul>
                <li id="chartconf_general_btn", class="chartconf_nav_li">
                    general
                </li>
                <li id="chartconf_query_btn", class="chartconf_nav_li">
                    query
                </li>
                <li id="chartconf_visualization_btn", class="chartconf_nav_li">
                    Visualisation
                </li>
                <li id="chartconf_axes_btn", class="chartconf_nav_li">
                    axes
                </li>
                <li id="chartconf_display_btn", class="chartconf_nav_li">
                    display
                </li>
            </ul>
        </div>

        <!-- Obsah jednotlivych nastaveni -->
        <div class="chartconf_wrapper">
            <div class="chartconf_content_hidden", id="chartconf_general_container">
            </div>

            <div class="chartconf_content_hidden", id="chartconf_query_container">
                <div class="query_wrapper">
                    <div class="query">
                        <span>query:</span>
                        <input type="text" id="prom_query">
                    </div>
                    <div class="query_options">
                        <div>
                            <span>legend</span>
                            <input id="query_legend" type="text">
                        </div>
                        <div>
                            <span>step</span>
                            <input id="query_step" type="text">
                        </div>
                        <div>
                            <span>instant</span>
                            <input type="checkbox", id="query_type">
                        </div>
                    </div>
                </div>
            </div>

            <div class="chartconf_content_hidden", id="chartconf_visualization_container">
                <ul>
                    <li>
                        <span class="icon_btn chart_vis" id="line_chart_btn">
                            <i class="fas fa-chart-line"></i>
                        </span>
                        <span class="icon_btn chart_vis" id="pie_chart_btn">
                            <i class="fas fa-chart-pie"></i>
                        </span>
                    </li>
                    <li>
                        <span class="icon_btn chart_vis" id="area_chart_btn">
                            <i class="fas fa-chart-area"></i>
                        </span>
                        <span class="icon_btn chart_vis" id="heatmap_chart_btn">
                            <i class="fas fa-table"></i>
                        </span>
                    </li>
                    <li>
                        <span class="icon_btn chart_vis" id="column_chart_btn">
                            <i class="fas fa-chart-bar"></i>
                        </span>
                        <span class="icon_btn chart_vis" id="donut_chart_btn">
                            <i class="far fa-life-ring"></i>
                        </span>
                    </li>
                </ul>
            </div>

            <div class="chartconf_content_hidden", id="chartconf_axes_container">
                <div>
                    <span>xaxis units: </span>
                    <input id="xaxis_units" type="text">
                </div>
            </div>

            <div class="chartconf_content_hidden", id="chartconf_display_container">
            </div>
        </div>
    </div>

{% endblock %}


{% block scripts %}
    <script src="https://code.jquery.com/ui/1.13.0/jquery-ui.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
    <script src="{{ url_for('static', filename='js/modelsUtils.js') }}"></script>
    <script src="{{ url_for('static', filename='js/models.js') }}"></script>
    <script src="{{ url_for('static', filename='js/chartConf.js') }}"></script>
    <script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>
    <script>
        $(document).ready(function(){
            // Set cache = false for all jquery ajax requests.
            $.ajaxSetup({
                cache: false,
            });
        });

        var dashboardId = "{{ dashboard.id }}";
        var dashboardName = "{{ dashboard.name}} ";
        var dashboard = new Dashboard(dashboardId, dashboardName);
        var currentChartId = null;
        init_dashboard();
    </script>
{% endblock %}
